<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Form Booking VIP</title>
  <style>
    body {
      font-family: "Segoe UI", Arial, sans-serif;
      background: linear-gradient(135deg, #000000, #660000);
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
      padding: 10px;
    }
    .form-container {
      background: #fff;
      padding: 20px;
      border-radius: 15px;
      width: 100%;
      max-width: 420px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.3);
      animation: fadeIn 0.6s ease-in-out;
      color: #222;
    }
    .header {
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 20px;
      border-bottom: 2px solid #e60000;
      padding-bottom: 10px;
    }
    .header img {
      height: 36px;
      margin-right: 10px;
    }
    .header h2 {
      margin: 0;
      color: #b30000;
      font-size: 20px;
      letter-spacing: 1px;
      text-align: center;
    }
    label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
      color: #333;
      font-size: 14px;
    }
    input, select, textarea {
      width: 100%;
      padding: 10px 12px;
      margin-bottom: 15px;
      border: 1px solid #ccc;
      background: #fff;
      border-radius: 8px;
      font-size: 14px;
      color: #000;
      transition: 0.3s;
    }
    input:focus, select:focus, textarea:focus {
      border-color: #e60000;
      box-shadow: 0 0 8px rgba(230,0,0,0.4);
      outline: none;
    }
    button {
      width: 100%;
      background: linear-gradient(135deg, #e60000, #800000);
      color: #fff;
      padding: 12px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      transition: transform 0.2s, opacity 0.3s;
    }
    button:hover {
      transform: scale(1.03);
      opacity: 0.9;
    }
    button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    /* Popup Modal */
    .modal {
      display: none;
      position: fixed;
      z-index: 999;
      left: 0; top: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      justify-content: center;
      align-items: center;
      padding: 15px;
    }
    .modal-content {
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      text-align: center;
      width: 100%;
      max-width: 350px;
      animation: fadeIn 0.4s ease;
      color: #111;
    }
    .modal-content.success { border-left: 6px solid #28a745; }
    .modal-content.conflict { border-left: 6px solid #e60000; }
    .modal-content.double { border-left: 6px solid #ffc107; }
    .modal-content h3 { margin: 0 0 10px; color: #b30000; font-size: 18px; }
    .modal-content p { font-size: 14px; }
    .close-btn {
      margin-top: 15px;
      background: #e60000;
      color: #fff;
      padding: 8px 15px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
      font-size: 14px;
    }
    .close-btn:hover {
      background: #b30000;
    }
    /* Responsive */
    @media (max-width: 480px) {
      .header h2 { font-size: 18px; }
      button { font-size: 15px; padding: 10px; }
      input, select, textarea { font-size: 13px; padding: 9px; }
    }
  
@media (max-width: 480px) {
  body {
    padding: 15px; /* Tambah ruang agar tidak mepet pinggir */
  }
  .form-container {
    padding: 18px;  /* Sedikit diperkecil supaya proporsional */
    border-radius: 12px;
  }
  .header h2 {
    font-size: 18px;
  }
  input, select, textarea {
    font-size: 14px;
    padding: 10px;
  }
  button {
    font-size: 15px;
    padding: 11px;
  }
}

</style>
</head>
<body>
  <div class="form-container">
    <!-- Header -->
    <div class="header">
      <img src="https://img.icons8.com/color/96/000000/calendar--v1.png" alt="Logo">
      <h2>Form Booking VIP</h2>
    </div>

    <form id="bookingForm">
      <label for="email">Email *</label>
      <input type="email" id="email" name="email" placeholder="Masukkan Email" required>

      <label for="tanggal">Tanggal</label>
      <input type="date" id="tanggal" name="tanggal" required>

      <label for="hari">Hari</label>
      <input type="text" id="hari" name="hari" readonly>

      <label for="ruangan">Lokasi Ruangan</label>
      <select id="ruangan" name="ruangan" required>
        <option value="">-- Pilih Ruangan --</option>
        <option>VIP Kayu</option>
        <option>VIP Hijau</option>
        <option>VIP Putih</option>
        <option>VIP Merah</option>
        <option>VIP Biru</option>
        <option>VIP Abu</option>
        <option>VIP Pink</option>
        <option value="lain">Yang lain</option>
      </select>
      <!-- Input custom ruangan -->
      <input type="text" id="ruanganLain" name="ruanganLain" placeholder="Tulis nama ruangan..." style="display:none; margin-top:-10px; margin-bottom:15px;">

      <label for="jamMulai">Jam Mulai</label>
      <input type="time" id="jamMulai" name="jamMulai" required>

      <label for="jamSelesai">Jam Selesai</label>
      <input type="time" id="jamSelesai" name="jamSelesai" required>

      <label for="pax">Jumlah Pax</label>
      <input type="number" id="pax" name="pax" min="1" placeholder="Masukkan jumlah pax" required>

      <label for="nama">Nama</label>
      <input type="text" id="nama" name="nama" placeholder="Masukkan Nama" required>

      <label for="nohp">No HP</label>
      <input type="tel" id="nohp" name="nohp" placeholder="Masukkan No HP" required>

      <label for="dp">DP</label>
      <input type="number" id="dp" name="dp" placeholder="Masukkan nominal DP" required>

      <label for="info">Info Tambahan</label>
      <textarea id="info" name="info" rows="3" placeholder="Tulis info tambahan..."></textarea>

      <button type="submit">Kirim Booking</button>
    </form>
  </div>

  <!-- Modal Popup -->
  <div id="popupModal" class="modal">
    <div id="popupContent" class="modal-content">
      <h3 id="popupTitle"></h3>
      <p id="popupMessage"></p>
      <button class="close-btn" onclick="closePopup()">Tutup</button>
    </div>
  </div>

  <script>
    const scriptURL = "https://script.google.com/macros/s/AKfycbx4GXMAl_3X05AU9rplvkyODSKYtQw0TMZoNdOFHlyIqRwjclkpbAnv2GU9y_74TTEsQw/exec";

    const tanggalInput = document.getElementById("tanggal");
    const hariInput = document.getElementById("hari");
    const ruanganSelect = document.getElementById("ruangan");
    const ruanganLainInput = document.getElementById("ruanganLain");

    // Otomatis isi nama hari saat pilih tanggal
    tanggalInput.addEventListener("change", () => {
      const tanggal = new Date(tanggalInput.value);
      if (!isNaN(tanggal)) {
        const options = { weekday: "long" };
        hariInput.value = tanggal.toLocaleDateString("id-ID", options);
      } else {
        hariInput.value = "";
      }
    });

    // Tampilkan input ruangan lain
    ruanganSelect.addEventListener("change", () => {
      if (ruanganSelect.value === "lain") {
        ruanganLainInput.style.display = "block";
        ruanganLainInput.required = true;
        ruanganLainInput.focus();
      } else {
        ruanganLainInput.style.display = "none";
        ruanganLainInput.required = false;
        ruanganLainInput.value = "";
      }
    });

    function showPopup(type, title, message) {
      const modal = document.getElementById("popupModal");
      const content = document.getElementById("popupContent");
      document.getElementById("popupTitle").textContent = title;
      document.getElementById("popupMessage").innerHTML = message;
      content.className = "modal-content " + type;
      modal.style.display = "flex";
    }

    function closePopup() {
      document.getElementById("popupModal").style.display = "none";
    }

    document.getElementById("bookingForm").addEventListener("submit", e => {
      e.preventDefault();
      const btn = document.querySelector("button[type=submit]");
      btn.disabled = true;
      btn.textContent = "Mengirim...";

      const tanggal = document.getElementById("tanggal").value;
      const jamMulai = document.getElementById("jamMulai").value;
      const jamSelesai = document.getElementById("jamSelesai").value;

      const formData = {
        email: document.getElementById("email").value,
        tanggalMulai: tanggal + " " + jamMulai,
        tanggalSelesai: tanggal + " " + jamSelesai,
        hari: document.getElementById("hari").value,
        ruangan: ruanganSelect.value === "lain" ? ruanganLainInput.value : ruanganSelect.value,
        pax: document.getElementById("pax").value,
        nama: document.getElementById("nama").value,
        nohp: document.getElementById("nohp").value,
        dp: document.getElementById("dp").value,
        info: document.getElementById("info").value
      };

      fetch(scriptURL, {
        method: "POST",
        body: JSON.stringify(formData)
      })
      .then(res => res.json())
      .then(data => {
        if (data.status === "conflict") {
          showPopup("conflict", "Booking Gagal", "❌ " + data.message);
        } else if (data.status === "double") {
          showPopup("double", "Booking Terkirim", "⚠️ " + data.message + "<br>Kode Booking: " + data.kode);
          document.getElementById("bookingForm").reset();
          hariInput.value = "";
        } else if (data.status === "success") {
          showPopup("success", "Booking Berhasil", "✅ Booking berhasil!<br>Kode: " + data.kode);
          document.getElementById("bookingForm").reset();
          hariInput.value = "";
        } else {
          showPopup("conflict", "Error", "❌ Terjadi kesalahan: " + (data.message || "Unknown error"));
        }
      })
      .catch(err => {
        showPopup("conflict", "Error", "❌ Terjadi kesalahan: " + err.message);
      })
      .finally(() => {
        btn.disabled = false;
        btn.textContent = "Kirim Booking";
      });
    });
  </script>
</body>
</html>